<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subject-Verb Agreement Master Quiz</title>
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #3498db;
            --success: #27ae60;
            --danger: #c0392b;
            --light: #ecf0f1;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f7f6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        h1 {
            margin: 0;
            color: var(--primary);
        }

        p.subtitle {
            color: #7f8c8d;
        }

        .stats-bar {
            display: flex;
            justify-content: space-between;
            background: var(--primary);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            position: sticky;
            top: 10px;
            z-index: 100;
        }

        .question-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
            transition: transform 0.2s;
        }

        .question-text {
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .option-btn {
            background: var(--light);
            border: 2px solid #bdc3c7;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.2s;
            text-align: center;
        }

        .option-btn:hover {
            background: #e2e6ea;
            border-color: var(--accent);
        }

        .option-btn.correct {
            background-color: #d5f5e3;
            border-color: var(--success);
            color: var(--success);
            font-weight: bold;
        }

        .option-btn.incorrect {
            background-color: #fadbd8;
            border-color: var(--danger);
            color: var(--danger);
            opacity: 0.7;
        }

        .explanation {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-left: 5px solid var(--accent);
            display: none;
        }

        .rule-tag {
            font-size: 0.85em;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--accent);
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        button.nav-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
        }

        button.nav-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>

    <header>
        <h1>Subject-Verb Agreement</h1>
        <p class="subtitle">Based on the 10 Golden Rules</p>
    </header>

    <div class="stats-bar">
        <span>Question: <span id="q-current">1</span> / <span id="q-total">0</span></span>
        <span>Score: <span id="score">0</span></span>
    </div>

    <div id="quiz-container">
    </div>

    <div class="nav-buttons">
        <button id="prev-btn" class="nav-btn" onclick="prevQuestion()" disabled>Previous</button>
        <button id="next-btn" class="nav-btn" onclick="nextQuestion()">Next</button>
    </div>

    <script>
        // DATASET: 50 High-Quality Questions (5 per Rule) to demonstrate the engine.
        // To reach 200, simply copy-paste this format and change the text.
        const questionBank = [
            // --- RULE 1: Prepositional Phrase Trap (Bank PO Context) ---
            { q: "The detailed report on the financial discrepancies of the two major banks ___ missing.", options: ["is", "are"], answer: 0, rule: "Rule 1", expl: "Subject is 'report' (Singular). Ignore 'discrepancies' and 'banks'." },
            { q: "The fluctuation in the prices of essential commodities ___ affecting the poor.", options: ["is", "are"], answer: 0, rule: "Rule 1", expl: "Subject is 'fluctuation' (Singular)." },
            { q: "A series of lectures on artificial intelligence and machine learning ___ been scheduled.", options: ["has", "have"], answer: 0, rule: "Rule 1", expl: "Subject is 'series' (Singular in this context)." },
            { q: "The quality of the assets managed by the offshore branches ___ questionable.", options: ["remain", "remains"], answer: 1, rule: "Rule 1", expl: "Subject is 'quality' (Singular)." },
            { q: "The exorbitant cost of setting up new infrastructure projects ___ delayed the plan.", options: ["has", "have"], answer: 0, rule: "Rule 1", expl: "Subject is 'cost' (Singular)." },
            { q: "The consensus among the board members regarding the merger ___ positive.", options: ["was", "were"], answer: 0, rule: "Rule 1", expl: "Subject is 'consensus' (Singular)." },
            { q: "The sharp rise in non-performing assets (NPAs) ___ a cause for concern.", options: ["is", "are"], answer: 0, rule: "Rule 1", expl: "Subject is 'rise' (Singular)." },
            { q: "The introduction of new policies regarding employee benefits ___ appreciated.", options: ["was", "were"], answer: 0, rule: "Rule 1", expl: "Subject is 'introduction' (Singular)." },
            { q: "The behavior of the criminal and his accomplices ___ reprehensible.", options: ["was", "were"], answer: 0, rule: "Rule 1", expl: "Subject is 'behavior' (Singular)." },
            { q: "The list of eligible candidates for the manager post ___ been finalized.", options: ["has", "have"], answer: 0, rule: "Rule 1", expl: "Subject is 'list' (Singular)." },
            { q: "The apparent disparity in the wages of men and women ___ to be addressed.", options: ["need", "needs"], answer: 1, rule: "Rule 1", expl: "Subject is 'disparity' (Singular)." },
            { q: "The success of these various marketing campaigns ___ on timing.", options: ["depend", "depends"], answer: 1, rule: "Rule 1", expl: "Subject is 'success' (Singular)." },

            // --- RULE 2: Additive Connectors (First Subject Dominates) ---
            { q: "The CEO, along with the board of directors, ___ the AGM.", options: ["attend", "attends"], answer: 1, rule: "Rule 2", expl: "Verb agrees with 'CEO' (Singular)." },
            { q: "The Prime Minister, accompanied by the Finance Minister, ___ arriving shortly.", options: ["is", "are"], answer: 0, rule: "Rule 2", expl: "Verb agrees with 'Prime Minister' (Singular)." },
            { q: "The main server, as well as the backup systems, ___ maintenance.", options: ["require", "requires"], answer: 1, rule: "Rule 2", expl: "Verb agrees with 'server' (Singular)." },
            { q: "Inflation, coupled with high unemployment, ___ the economy.", options: ["plague", "plagues"], answer: 1, rule: "Rule 2", expl: "Verb agrees with 'Inflation' (Singular)." },
            { q: "The captain, unlike the other players, ___ calm under pressure.", options: ["look", "looks"], answer: 1, rule: "Rule 2", expl: "Verb agrees with 'captain'." },
            { q: "My colleagues, in addition to my boss, ___ impressed with the presentation.", options: ["was", "were"], answer: 1, rule: "Rule 2", expl: "Verb agrees with 'colleagues' (Plural)." },
            { q: "The legislation, together with its amendments, ___ been passed.", options: ["has", "have"], answer: 0, rule: "Rule 2", expl: "Verb agrees with 'legislation' (Singular)." },
            { q: "The accused, along with his family members, ___ waiting outside.", options: ["is", "are"], answer: 0, rule: "Rule 2", expl: "Verb agrees with 'accused' (Singular)." },
            { q: "The ship, with all its passengers, ___ sunk.", options: ["was", "were"], answer: 0, rule: "Rule 2", expl: "Verb agrees with 'ship'." },
            { q: "Ravi, like his brothers, ___ to play cricket.", options: ["love", "loves"], answer: 1, rule: "Rule 2", expl: "Verb agrees with 'Ravi'." },
            { q: "The bank manager, as well as the clerks, ___ arrested for fraud.", options: ["was", "were"], answer: 0, rule: "Rule 2", expl: "Verb agrees with 'manager'." },
            { q: "Gold, unlike other metals, ___ its shine.", options: ["retain", "retains"], answer: 1, rule: "Rule 2", expl: "Verb agrees with 'Gold'." },

            // --- RULE 3: Alternative Connectors (Nearest Subject Dominates) ---
            { q: "Either the auditors or the accountant ___ responsible for this error.", options: ["is", "are"], answer: 0, rule: "Rule 3", expl: "Nearest subject is 'accountant' (Singular)." },
            { q: "Neither the manager nor the employees ___ aware of the new rule.", options: ["was", "were"], answer: 1, rule: "Rule 3", expl: "Nearest subject is 'employees' (Plural)." },
            { q: "Not only the laptop but also the files ___ stolen.", options: ["was", "were"], answer: 1, rule: "Rule 3", expl: "Nearest subject is 'files' (Plural)." },
            { q: "Either the government or the private sector ___ to step in.", options: ["has", "have"], answer: 0, rule: "Rule 3", expl: "Nearest subject is 'private sector' (Singular)." },
            { q: "Neither the loans nor the credit card debt ___ been paid.", options: ["has", "have"], answer: 0, rule: "Rule 3", expl: "Nearest subject is 'debt' (Singular)." },
            { q: "Either you or I ___ going to lead the project.", options: ["am", "are"], answer: 0, rule: "Rule 3", expl: "Nearest subject is 'I', so verb is 'am'." },
            { q: "Not only the students but also the teacher ___ confused.", options: ["is", "are"], answer: 0, rule: "Rule 3", expl: "Nearest subject is 'teacher' (Singular)." },
            { q: "Neither the director nor the actors ___ arrived yet.", options: ["has", "have"], answer: 1, rule: "Rule 3", expl: "Nearest subject is 'actors' (Plural)." },
            { q: "Either the blue file or the red ones ___ the documents.", options: ["contain", "contains"], answer: 0, rule: "Rule 3", expl: "Nearest subject is 'red ones' (Plural)." },
            { q: "Not only the passengers but also the driver ___ injured.", options: ["was", "were"], answer: 0, rule: "Rule 3", expl: "Nearest subject is 'driver' (Singular)." },
            { q: "Neither the principal nor the teachers ___ taking the class.", options: ["is", "are"], answer: 1, rule: "Rule 3", expl: "Nearest subject is 'teachers'." },
            { q: "Either the software or the hardware ___ malfunctioning.", options: ["is", "are"], answer: 0, rule: "Rule 3", expl: "Nearest subject is 'hardware' (Singular)." },

            // --- RULE 4: The "And" Exception (Same Idea/Person) ---
            { q: "The Managing Director and CEO ___ resigning.", options: ["is", "are"], answer: 0, rule: "Rule 4", expl: "One person holds both titles (indicated by single 'The')." },
            { q: "The Managing Director and the Chairman ___ discussing the merger.", options: ["is", "are"], answer: 1, rule: "Rule 4", expl: "Two distinct people (The MD and The Chairman)." },
            { q: "Slow and steady ___ the race.", options: ["win", "wins"], answer: 1, rule: "Rule 4", expl: "Single concept." },
            { q: "Bread and butter ___ his only concern.", options: ["is", "are"], answer: 0, rule: "Rule 4", expl: "Refers to livelihood (Single concept)." },
            { q: "Bread and butter ___ sold here.", options: ["is", "are"], answer: 1, rule: "Rule 4", expl: "Refers to two separate items being sold." },
            { q: "Law and order ___ been restored in the city.", options: ["has", "have"], answer: 0, rule: "Rule 4", expl: "Single administrative concept." },
            { q: "My friend and guide ___ helped me immensely.", options: ["has", "have"], answer: 0, rule: "Rule 4", expl: "One person acts as both." },
            { q: "Time and tide ___ for no man.", options: ["wait", "waits"], answer: 0, rule: "Rule 4", expl: "Classic exception, usually treated as plural in this specific proverb." },
            { q: "Sum and substance of the passage ___ this.", options: ["is", "are"], answer: 0, rule: "Rule 4", expl: "Single idea (summary)." },
            { q: "Whisky and soda ___ his favorite drink.", options: ["was", "were"], answer: 0, rule: "Rule 4", expl: "Single mixture." },
            { q: "The poet and philosopher ___ dead.", options: ["is", "are"], answer: 0, rule: "Rule 4", expl: "One person." },
            { q: "The poet and the philosopher ___ dead.", options: ["is", "are"], answer: 1, rule: "Rule 4", expl: "Two people." },

            // --- RULE 5: Indefinite Pronouns (Always Singular) ---
            { q: "Everyone in the bank ___ to meet the chairman.", options: ["want", "wants"], answer: 1, rule: "Rule 5", expl: "Everyone is singular." },
            { q: "Someone ___ hacked the system.", options: ["has", "have"], answer: 0, rule: "Rule 5", expl: "Someone is singular." },
            { q: "Nothing ___ impossible for a willing heart.", options: ["is", "are"], answer: 0, rule: "Rule 5", expl: "Nothing is singular." },
            { q: "Nobody ___ the trouble I have seen.", options: ["know", "knows"], answer: 1, rule: "Rule 5", expl: "Nobody is singular." },
            { q: "Each and every one of us ___ responsible.", options: ["is", "are"], answer: 0, rule: "Rule 5", expl: "Singular." },
            { q: "Anything that can go wrong ___ go wrong.", options: ["will", "will"], answer: 0, rule: "Rule 5", expl: "Trick question (Will is same), but implied subject is singular." },
            { q: "Neither of the options ___ viable.", options: ["seem", "seems"], answer: 1, rule: "Rule 5", expl: "Neither acts as singular pronoun here." },
            { q: "Everybody ___ their own opinion.", options: ["has", "have"], answer: 0, rule: "Rule 5", expl: "Everybody takes singular verb." },
            { q: "No one ___ exempt from the tax.", options: ["is", "are"], answer: 0, rule: "Rule 5", expl: "No one is singular." },
            { q: "Somebody ___ left their umbrella.", options: ["has", "have"], answer: 0, rule: "Rule 5", expl: "Somebody is singular." },
            { q: "Anyone who ___ to apply must do so now.", options: ["wish", "wishes"], answer: 1, rule: "Rule 5", expl: "Anyone is singular." },
            { q: "Everything ___ according to plan.", options: ["go", "goes"], answer: 1, rule: "Rule 5", expl: "Everything is singular." },

            // --- RULE 6: Distributives (Each/Every - Absolute Singular) ---
            { q: "Every officer and every clerk ___ at their desk.", options: ["was", "were"], answer: 0, rule: "Rule 6", expl: "Repetition of 'Every' keeps it singular." },
            { q: "Each day and each hour ___ learning.", options: ["bring", "brings"], answer: 1, rule: "Rule 6", expl: "Absolute singular." },
            { q: "Every boy and every girl ___ given a packet of sweets.", options: ["was", "were"], answer: 0, rule: "Rule 6", expl: "Absolute singular." },
            { q: "Each applicant ___ to submit a resume.", options: ["has", "have"], answer: 0, rule: "Rule 6", expl: "Each is singular." },
            { q: "Every man, woman, and child ___ happy.", options: ["was", "were"], answer: 0, rule: "Rule 6", expl: "Every applies to all, making it singular." },
            { q: "Each of the branches ___ its own target.", options: ["has", "have"], answer: 0, rule: "Rule 6", expl: "Subject is 'Each'." },
            { q: "Every solution ___ a new problem.", options: ["create", "creates"], answer: 1, rule: "Rule 6", expl: "Singular." },
            { q: "Each chapter and each section ___ reviewed.", options: ["was", "were"], answer: 0, rule: "Rule 6", expl: "Singular." },
            { q: "Every student and teacher ___ aware of the rules.", options: ["is", "are"], answer: 0, rule: "Rule 6", expl: "Singular." },
            { q: "Each minute ___ precious.", options: ["is", "are"], answer: 0, rule: "Rule 6", expl: "Singular." },

            // --- RULE 7: Either/Neither OF (Selection) ---
            { q: "Neither of the two candidates ___ suitable for the job.", options: ["was", "were"], answer: 0, rule: "Rule 7", expl: "Neither of + Plural Noun = Singular Verb." },
            { q: "One of the biggest problems ___ unemployment.", options: ["is", "are"], answer: 0, rule: "Rule 7", expl: "One of... = Singular." },
            { q: "Either of the roads ___ to the station.", options: ["lead", "leads"], answer: 1, rule: "Rule 7", expl: "Either of... = Singular." },
            { q: "None of the information ___ accurate.", options: ["is", "are"], answer: 0, rule: "Rule 7", expl: "Uncountable noun (information) with None = Singular." },
            { q: "Each of the employees ___ a bonus.", options: ["receive", "receives"], answer: 1, rule: "Rule 7", expl: "Each of... = Singular." },
            { q: "One of my friends ___ living in London.", options: ["is", "are"], answer: 0, rule: "Rule 7", expl: "Subject is 'One'." },
            { q: "Neither of the accusations ___ true.", options: ["hold", "holds"], answer: 1, rule: "Rule 7", expl: "Subject is 'Neither'." },
            { q: "Any of these tools ___ fine.", options: ["work", "works"], answer: 1, rule: "Rule 7", expl: "Any is treated as singular here." },
            { q: "Either of the plans ___ acceptable.", options: ["is", "are"], answer: 0, rule: "Rule 7", expl: "Either is singular." },
            { q: "Neither of the boys ___ done his homework.", options: ["has", "have"], answer: 0, rule: "Rule 7", expl: "Neither is singular." },
            { q: "One of the managers ___ resigning.", options: ["is", "are"], answer: 0, rule: "Rule 7", expl: "Subject is One." },
            { q: "Each of the students ___ responsible for their own luggage.", options: ["is", "are"], answer: 0, rule: "Rule 7", expl: "Subject is Each." },

            // --- RULE 8: Relative Pronoun (Antecedent Agreement) ---
            { q: "The employee who ___ the best performance will be rewarded.", options: ["show", "shows"], answer: 1, rule: "Rule 8", expl: "Antecedent 'employee' is singular." },
            { q: "The files which ___ on the desk are confidential.", options: ["is", "are"], answer: 1, rule: "Rule 8", expl: "Antecedent 'files' is plural." },
            { q: "I am the one who ___ to blame.", options: ["is", "am"], answer: 1, rule: "Rule 8", expl: "Antecedent 'one' or 'I'? In 'I am the one who...', 'who' refers to 'one' (3rd person). BUT 'It is I who am...'. This is subtle. 'I am the person who IS'. 'It is I who AM'." },
            { q: "It is I who ___ responsible for the delay.", options: ["is", "am"], answer: 1, rule: "Rule 8", expl: "Antecedent is 'I', so verb is 'am'." },
            { q: "The candidates who ___ the exam will be interviewed.", options: ["pass", "passes"], answer: 0, rule: "Rule 8", expl: "Antecedent 'candidates' is plural." },
            { q: "The software that ___ the data is expensive.", options: ["analyse", "analyses"], answer: 1, rule: "Rule 8", expl: "Antecedent 'software' is singular." },
            { q: "People who ___ in glass houses shouldn't throw stones.", options: ["live", "lives"], answer: 0, rule: "Rule 8", expl: "Antecedent 'People' is plural." },
            { q: "The dog that ___ loudly is mine.", options: ["bark", "barks"], answer: 1, rule: "Rule 8", expl: "Antecedent 'dog' is singular." },
            { q: "She is the woman who ___ me.", options: ["help", "helps"], answer: 1, rule: "Rule 8", expl: "Antecedent 'woman' is singular." },
            { q: "The companies which ___ profits are expanding.", options: ["make", "makes"], answer: 0, rule: "Rule 8", expl: "Antecedent 'companies' is plural." },

            // --- RULE 9: One of the... WHO (Plural Exception) ---
            { q: "He is one of the managers who ___ always punctual.", options: ["is", "are"], answer: 1, rule: "Rule 9", expl: "Antecedent is 'managers' (Plural)." },
            { q: "This is one of the books that ___ worth reading.", options: ["is", "are"], answer: 1, rule: "Rule 9", expl: "Antecedent is 'books' (Plural)." },
            { q: "She is one of the officers who ___ been promoted.", options: ["has", "have"], answer: 1, rule: "Rule 9", expl: "Antecedent is 'officers' (Plural)." },
            { q: "Ravi is one of the students who ___ never absent.", options: ["is", "are"], answer: 1, rule: "Rule 9", expl: "Antecedent is 'students' (Plural)." },
            { q: "Gold is one of the metals that ___ highly valued.", options: ["is", "are"], answer: 1, rule: "Rule 9", expl: "Antecedent is 'metals' (Plural)." },
            { q: "This is one of the issues that ___ immediate attention.", options: ["need", "needs"], answer: 0, rule: "Rule 9", expl: "Antecedent is 'issues' (Plural) -> need." },
            { q: "He is one of those people who ___ everyone.", options: ["trust", "trusts"], answer: 0, rule: "Rule 9", expl: "Antecedent is 'people' (Plural) -> trust." },
            { q: "One of the girls who ___ singing is my niece.", options: ["is", "are"], answer: 1, rule: "Rule 9", expl: "Inside the relative clause: 'girls who ARE'." },
            { q: "He is one of the few politicians who ___ honest.", options: ["is", "are"], answer: 1, rule: "Rule 9", expl: "Antecedent 'politicians' -> are." },
            { q: "It is one of the companies that ___ growing fast.", options: ["is", "are"], answer: 1, rule: "Rule 9", expl: "Antecedent 'companies' -> are." },

            // --- RULE 10: The ONLY One of the... WHO (Singular Exception) ---
            { q: "He is the ONLY one of the managers who ___ punctual.", options: ["is", "are"], answer: 0, rule: "Rule 10", expl: "'The ONLY one' restricts the subject to singular." },
            { q: "This is the ONLY one of the books that ___ missing.", options: ["is", "are"], answer: 0, rule: "Rule 10", expl: "Singular." },
            { q: "She is the only one of the applicants who ___ qualified.", options: ["is", "are"], answer: 0, rule: "Rule 10", expl: "Singular." },
            { q: "It is the only one of the machines that ___ working.", options: ["is", "are"], answer: 0, rule: "Rule 10", expl: "Singular." },
            { q: "John is the only one of the boys who ___ the answer.", options: ["know", "knows"], answer: 1, rule: "Rule 10", expl: "Singular." },
            { q: "This is the only one of the proposals that ___ sense.", options: ["make", "makes"], answer: 1, rule: "Rule 10", expl: "Singular." },
            { q: "He is the only one of the soldiers who ___ survived.", options: ["has", "have"], answer: 0, rule: "Rule 10", expl: "Singular." },
            { q: "That is the only one of the cars that ___ fast.", options: ["go", "goes"], answer: 1, rule: "Rule 10", expl: "Singular." },
            { q: "She is the only one of the dancers who ___ gracefully.", options: ["move", "moves"], answer: 1, rule: "Rule 10", expl: "Singular." },
            { q: "This is the only one of the buildings that ___ earthquake proof.", options: ["is", "are"], answer: 0, rule: "Rule 10", expl: "Singular." },

            // --- RULE 11: Uncountable Nouns (Always Singular) ---
            { q: "The scenery of the Himalayas ___ breathtaking.", options: ["is", "are"], answer: 0, rule: "Rule 11", expl: "Scenery is uncountable/singular." },
            { q: "The furniture in this room ___ old.", options: ["is", "are"], answer: 0, rule: "Rule 11", expl: "Furniture is singular." },
            { q: "His advice on financial matters ___ sound.", options: ["is", "are"], answer: 0, rule: "Rule 11", expl: "Advice is singular." },
            { q: "The information provided by the spies ___ incorrect.", options: ["was", "were"], answer: 0, rule: "Rule 11", expl: "Information is singular." },
            { q: "All his luggage ___ stolen at the airport.", options: ["was", "were"], answer: 0, rule: "Rule 11", expl: "Luggage is singular." },
            { q: "The stationery ___ been ordered.", options: ["has", "have"], answer: 0, rule: "Rule 11", expl: "Stationery is singular." },
            { q: "Keats' poetry ___ full of imagery.", options: ["is", "are"], answer: 0, rule: "Rule 11", expl: "Poetry is singular." },
            { q: "The machinery ___ to be repaired.", options: ["need", "needs"], answer: 1, rule: "Rule 11", expl: "Machinery is singular." },
            { q: "The jewelry she wore ___ expensive.", options: ["was", "were"], answer: 0, rule: "Rule 11", expl: "Jewelry is singular." },
            { q: "The percentage of success ___ low.", options: ["is", "are"], answer: 0, rule: "Rule 11", expl: "Percentage is singular." },
            { q: "The cost of postage ___ increased.", options: ["has", "have"], answer: 0, rule: "Rule 11", expl: "Postage/Cost is singular." },
            { q: "The knowledge of ancient texts ___ rare.", options: ["is", "are"], answer: 0, rule: "Rule 11", expl: "Knowledge is singular." },
            { q: "Evidence ___ been found against him.", options: ["has", "have"], answer: 0, rule: "Rule 11", expl: "Evidence is singular." },
            { q: "The traffic ___ heavy today.", options: ["is", "are"], answer: 0, rule: "Rule 11", expl: "Traffic is singular." },
            { q: "The crockery ___ broken.", options: ["was", "were"], answer: 0, rule: "Rule 11", expl: "Crockery is singular." },

            // --- RULE 12: Plural Form, Singular Meaning ---
            { q: "Physics ___ a subject that requires logic.", options: ["is", "are"], answer: 0, rule: "Rule 12", expl: "Subject name (Singular)." },
            { q: "Mathematics ___ not my strong suit.", options: ["is", "are"], answer: 0, rule: "Rule 12", expl: "Subject name (Singular)." },
            { q: "The news ___ broadcast at 9 PM.", options: ["is", "are"], answer: 0, rule: "Rule 12", expl: "News is always singular." },
            { q: "Ethics ___ a branch of philosophy.", options: ["is", "are"], answer: 0, rule: "Rule 12", expl: "Singular." },
            { q: "The first innings ___ played well.", options: ["was", "were"], answer: 0, rule: "Rule 12", expl: "Innings is singular." },
            { q: "Measles ___ a viral infection.", options: ["is", "are"], answer: 0, rule: "Rule 12", expl: "Disease name (Singular)." },
            { q: "Economics ___ the study of resource allocation.", options: ["is", "are"], answer: 0, rule: "Rule 12", expl: "Subject name (Singular)." },
            { q: "Politics ___ a divisive topic.", options: ["is", "are"], answer: 0, rule: "Rule 12", expl: "Field of study (Singular)." },
            { q: "Gymnastics ___ agility.", options: ["require", "requires"], answer: 1, rule: "Rule 12", expl: "Activity name (Singular)." },
            { q: "Billiards ___ played on a table.", options: ["is", "are"], answer: 0, rule: "Rule 12", expl: "Game name (Singular)." },
            { q: "Rabies ___ caused by dog bites.", options: ["is", "are"], answer: 0, rule: "Rule 12", expl: "Disease name (Singular)." },
            { q: "Linguistics ___ hard to master.", options: ["is", "are"], answer: 0, rule: "Rule 12", expl: "Subject name (Singular)." },

            // --- RULE 13: Singular Form, Plural Meaning ---
            { q: "The cattle ___ grazing in the meadow.", options: ["is", "are"], answer: 1, rule: "Rule 13", expl: "Cattle is collective plural." },
            { q: "The police ___ investigating the crime.", options: ["is", "are"], answer: 1, rule: "Rule 13", expl: "Police is collective plural." },
            { q: "The gentry ___ invited to the ball.", options: ["was", "were"], answer: 1, rule: "Rule 13", expl: "Gentry (high class people) is plural." },
            { q: "The peasantry ___ protesting against the law.", options: ["is", "are"], answer: 1, rule: "Rule 13", expl: "Peasantry is plural." },
            { q: "Children ___ playing in the park.", options: ["is", "are"], answer: 1, rule: "Rule 13", expl: "Children is plural." },
            { q: "The infantry ___ marching forward.", options: ["is", "are"], answer: 1, rule: "Rule 13", expl: "Infantry (foot soldiers) is plural." },
            { q: "The cavalry ___ charged at the enemy.", options: ["has", "have"], answer: 1, rule: "Rule 13", expl: "Cavalry (mounted soldiers) is plural." },
            { q: "People ___ generally kind.", options: ["is", "are"], answer: 1, rule: "Rule 13", expl: "People is plural." },
            { q: "Vermin ___ infested the warehouse.", options: ["has", "have"], answer: 1, rule: "Rule 13", expl: "Vermin is plural." },
            { q: "The clergy ___ gathered for the synod.", options: ["is", "are"], answer: 1, rule: "Rule 13", expl: "Clergy is plural." },
            { q: "Poultry ___ kept in this farm.", options: ["is", "are"], answer: 1, rule: "Rule 13", expl: "Poultry is plural." },
            { q: "Folk ___ travelling from far away.", options: ["is", "are"], answer: 1, rule: "Rule 13", expl: "Folk is plural." },

            // --- RULE 14: Fixed Pairs (Always Plural vs Pair of) ---
            { q: "His spectacles ___ broken.", options: ["is", "are"], answer: 1, rule: "Rule 14", expl: "Spectacles (glasses) is plural." },
            { q: "A pair of spectacles ___ bought.", options: ["was", "were"], answer: 0, rule: "Rule 14", expl: "'A pair' is singular." },
            { q: "The scissors ___ blunt.", options: ["is", "are"], answer: 1, rule: "Rule 14", expl: "Scissors is plural." },
            { q: "My trousers ___ too tight.", options: ["is", "are"], answer: 1, rule: "Rule 14", expl: "Trousers is plural." },
            { q: "A new pair of shoes ___ needed.", options: ["is", "are"], answer: 0, rule: "Rule 14", expl: "'A pair' is singular." },
            { q: "The binoculars ___ useful for birdwatching.", options: ["is", "are"], answer: 1, rule: "Rule 14", expl: "Binoculars is plural." },
            { q: "The tongs ___ near the fireplace.", options: ["is", "are"], answer: 1, rule: "Rule 14", expl: "Tongs is plural." },
            { q: "His jeans ___ faded.", options: ["is", "are"], answer: 1, rule: "Rule 14", expl: "Jeans is plural." },
            { q: "The headphones ___ not working.", options: ["is", "are"], answer: 1, rule: "Rule 14", expl: "Headphones is plural." },
            { q: "This pair of gloves ___ warm.", options: ["is", "are"], answer: 0, rule: "Rule 14", expl: "'This pair' is singular." },
            { q: "Her sunglasses ___ scratching.", options: ["need", "needs"], answer: 0, rule: "Rule 14", expl: "Sunglasses (plural) -> need." },
            { q: "A pair of pliers ___ required.", options: ["is", "are"], answer: 0, rule: "Rule 14", expl: "'A pair' is singular." },

            // --- RULE 15: A Number vs The Number ---
            { q: "A number of students ___ failing.", options: ["is", "are"], answer: 1, rule: "Rule 15", expl: "'A number of' = Many (Plural)." },
            { q: "The number of students ___ dropping.", options: ["is", "are"], answer: 0, rule: "Rule 15", expl: "'The number' = The count (Singular)." },
            { q: "A number of issues ___ been raised.", options: ["has", "have"], answer: 1, rule: "Rule 15", expl: "Plural." },
            { q: "The number of accidents ___ increased.", options: ["has", "have"], answer: 0, rule: "Rule 15", expl: "Singular." },
            { q: "A number of books ___ missing from the library.", options: ["is", "are"], answer: 1, rule: "Rule 15", expl: "Plural." },
            { q: "The number of applicants ___ fifty.", options: ["was", "were"], answer: 0, rule: "Rule 15", expl: "Singular." },
            { q: "A number of people ___ gathered.", options: ["has", "have"], answer: 1, rule: "Rule 15", expl: "Plural." },
            { q: "The number of days in April ___ thirty.", options: ["is", "are"], answer: 0, rule: "Rule 15", expl: "Singular." },
            { q: "A large number of voters ___ turned out.", options: ["has", "have"], answer: 1, rule: "Rule 15", expl: "Plural." },
            { q: "The exact number of refugees ___ unknown.", options: ["is", "are"], answer: 0, rule: "Rule 15", expl: "Singular." },

            // --- RULE 16: Units of Measurement (Collective Unit) ---
            { q: "Fifty thousand rupees ___ a large sum.", options: ["is", "are"], answer: 0, rule: "Rule 16", expl: "Amount as a whole = Singular." },
            { q: "Ten kilometers ___ a long walk.", options: ["is", "are"], answer: 0, rule: "Rule 16", expl: "Distance as a whole = Singular." },
            { q: "Three hours ___ too long to wait.", options: ["is", "are"], answer: 0, rule: "Rule 16", expl: "Time period = Singular." },
            { q: "Five kilograms of flour ___ needed.", options: ["is", "are"], answer: 0, rule: "Rule 16", expl: "Weight = Singular." },
            { q: "Six months ___ passed since he left.", options: ["has", "have"], answer: 0, rule: "Rule 16", expl: "Time period = Singular." },
            { q: "Twenty miles ___ not a great distance.", options: ["is", "are"], answer: 0, rule: "Rule 16", expl: "Distance = Singular." },
            { q: "One hundred dollars ___ the price.", options: ["is", "are"], answer: 0, rule: "Rule 16", expl: "Amount = Singular." },
            { q: "Ten years ___ a decade.", options: ["make", "makes"], answer: 1, rule: "Rule 16", expl: "Singular concept." },
            { q: "Two tons of coal ___ delivered.", options: ["was", "were"], answer: 0, rule: "Rule 16", expl: "Quantity = Singular." },
            { q: "Forty minutes ___ enough time for the test.", options: ["is", "are"], answer: 0, rule: "Rule 16", expl: "Time = Singular." },

            // --- RULE 17: Fractions & Percentages (Of + Noun) ---
            { q: "Half of the milk ___ spilled.", options: ["was", "were"], answer: 0, rule: "Rule 17", expl: "Milk is uncountable (Singular)." },
            { q: "Half of the students ___ absent.", options: ["was", "were"], answer: 1, rule: "Rule 17", expl: "Students is plural." },
            { q: "Two-thirds of the city ___ flooded.", options: ["was", "were"], answer: 0, rule: "Rule 17", expl: "City is singular." },
            { q: "Two-thirds of the apples ___ rotten.", options: ["is", "are"], answer: 1, rule: "Rule 17", expl: "Apples is plural." },
            { q: "Most of the advice ___ useful.", options: ["was", "were"], answer: 0, rule: "Rule 17", expl: "Advice is uncountable." },
            { q: "Most of the people ___ agreed.", options: ["has", "have"], answer: 1, rule: "Rule 17", expl: "People is plural." },
            { q: "Twenty percent of the budget ___ spent.", options: ["was", "were"], answer: 0, rule: "Rule 17", expl: "Budget is singular." },
            { q: "Twenty percent of the employees ___ new.", options: ["is", "are"], answer: 1, rule: "Rule 17", expl: "Employees is plural." },
            { q: "A lot of work ___ to be done.", options: ["remain", "remains"], answer: 1, rule: "Rule 17", expl: "Work is uncountable." },
            { q: "A lot of errors ___ been found.", options: ["has", "have"], answer: 1, rule: "Rule 17", expl: "Errors is plural." },
            { q: "Some of the pie ___ missing.", options: ["is", "are"], answer: 0, rule: "Rule 17", expl: "Pie is singular." },
            { q: "Some of the books ___ old.", options: ["is", "are"], answer: 1, rule: "Rule 17", expl: "Books is plural." },
            { q: "Three-fourths of the wall ___ painted.", options: ["is", "are"], answer: 0, rule: "Rule 17", expl: "Wall is singular." },
            { q: "All of the water ___ evaporated.", options: ["has", "have"], answer: 0, rule: "Rule 17", expl: "Water is singular." },
            { q: "All of the players ___ ready.", options: ["is", "are"], answer: 1, rule: "Rule 17", expl: "Players is plural." },

            // --- RULE 18: "More than one" (Singular) ---
            { q: "More than one candidate ___ disqualified.", options: ["was", "were"], answer: 0, rule: "Rule 18", expl: "More than one + Singular Noun = Singular Verb." },
            { q: "More than one plan ___ failed.", options: ["has", "have"], answer: 0, rule: "Rule 18", expl: "Singular." },
            { q: "More than one person ___ objected.", options: ["has", "have"], answer: 0, rule: "Rule 18", expl: "Singular." },
            { q: "More than one city ___ in ruins.", options: ["lie", "lies"], answer: 1, rule: "Rule 18", expl: "Singular." },
            { q: "More than one error ___ spotted.", options: ["was", "were"], answer: 0, rule: "Rule 18", expl: "Singular." },
            { q: "More than one opportunity ___ lost.", options: ["was", "were"], answer: 0, rule: "Rule 18", expl: "Singular." },
            { q: "More than one house ___ collapse.", options: ["make", "makes"], answer: 1, rule: "Rule 18", expl: "Singular (nonsensical sentence but grammatically singular)." },
            { q: "More than one soldier ___ killed.", options: ["was", "were"], answer: 0, rule: "Rule 18", expl: "Singular." },
            { q: "More than one solution ___ possible.", options: ["is", "are"], answer: 0, rule: "Rule 18", expl: "Singular." },
            { q: "More than one meeting ___ cancelled.", options: ["was", "were"], answer: 0, rule: "Rule 18", expl: "Singular." },

            // --- RULE 19: "More ... than one" (Plural) ---
            { q: "More candidates than one ___ disqualified.", options: ["was", "were"], answer: 1, rule: "Rule 19", expl: "More + Plural Noun... = Plural Verb." },
            { q: "More plans than one ___ failed.", options: ["has", "have"], answer: 1, rule: "Rule 19", expl: "Plural." },
            { q: "More persons than one ___ objected.", options: ["has", "have"], answer: 1, rule: "Rule 19", expl: "Plural." },
            { q: "More cities than one ___ destroyed.", options: ["was", "were"], answer: 1, rule: "Rule 19", expl: "Plural." },
            { q: "More errors than one ___ found.", options: ["was", "were"], answer: 1, rule: "Rule 19", expl: "Plural." },
            { q: "More books than one ___ bought.", options: ["was", "were"], answer: 1, rule: "Rule 19", expl: "Plural." },
            { q: "More accidents than one ___ reported.", options: ["has", "have"], answer: 1, rule: "Rule 19", expl: "Plural." },
            { q: "More questions than one ___ asked.", options: ["was", "were"], answer: 1, rule: "Rule 19", expl: "Plural." },
            { q: "More students than one ___ absent.", options: ["is", "are"], answer: 1, rule: "Rule 19", expl: "Plural." },
            { q: "More reasons than one ___ given.", options: ["was", "were"], answer: 1, rule: "Rule 19", expl: "Plural." },

            // --- RULE 20: Imaginary Sentences (Subjunctive 'Were') ---
            { q: "I wish I ___ a billionaire.", options: ["was", "were"], answer: 1, rule: "Rule 20", expl: "Wish/Imaginary = Were." },
            { q: "If he ___ here, he would know what to do.", options: ["was", "were"], answer: 1, rule: "Rule 20", expl: "Hypothetical = Were." },
            { q: "She talks as if she ___ the boss.", options: ["was", "were"], answer: 1, rule: "Rule 20", expl: "As if = Were." },
            { q: "If I ___ you, I would accept the offer.", options: ["was", "were"], answer: 1, rule: "Rule 20", expl: "Hypothetical = Were." },
            { q: "Would that he ___ alive today!", options: ["was", "were"], answer: 1, rule: "Rule 20", expl: "Wish = Were." },
            { q: "If Mahatma Gandhi ___ alive, he would be sad.", options: ["was", "were"], answer: 1, rule: "Rule 20", expl: "Hypothetical = Were." },
            { q: "He commands me as if I ___ his slave.", options: ["am", "were"], answer: 1, rule: "Rule 20", expl: "As if = Were." },
            { q: "I wish I ___ able to help you.", options: ["was", "were"], answer: 1, rule: "Rule 20", expl: "Wish = Were." },
            { q: "If the sky ___ to fall, we would all die.", options: ["was", "were"], answer: 1, rule: "Rule 20", expl: "Hypothetical = Were." },
            { q: "It is time you ___ studying.", options: ["start", "started"], answer: 1, rule: "Rule 20", expl: "Exception: 'It is time' usually takes simple past, but subjunctive mood aligns with past form." },

            // --- RULE 21: "Nothing But" (Always Singular) ---
            { q: "Nothing but sand ___ visible in the desert.", options: ["is", "are"], answer: 0, rule: "Rule 21", expl: "Subject is 'Nothing'." },
            { q: "Nothing but books ___ available here.", options: ["is", "are"], answer: 0, rule: "Rule 21", expl: "Subject is 'Nothing'." },
            { q: "Nothing but empty promises ___ given.", options: ["was", "were"], answer: 0, rule: "Rule 21", expl: "Subject is 'Nothing'." },
            { q: "Nothing but disasters ___ happened this year.", options: ["has", "have"], answer: 0, rule: "Rule 21", expl: "Subject is 'Nothing'." },
            { q: "Nothing but trees ___ grown there.", options: ["has", "have"], answer: 0, rule: "Rule 21", expl: "Subject is 'Nothing'." },
            { q: "Nothing but rumors ___ spreading.", options: ["is", "are"], answer: 0, rule: "Rule 21", expl: "Subject is 'Nothing'." },
            { q: "Nothing but hardships ___ his lot.", options: ["was", "were"], answer: 0, rule: "Rule 21", expl: "Subject is 'Nothing'." },
            { q: "Nothing but lies ___ come from his mouth.", options: ["has", "have"], answer: 0, rule: "Rule 21", expl: "Subject is 'Nothing'." },
            { q: "Nothing but memories ___.", options: ["remain", "remains"], answer: 1, rule: "Rule 21", expl: "Subject is 'Nothing'." },
            { q: "Nothing but complaints ___ received.", options: ["was", "were"], answer: 0, rule: "Rule 21", expl: "Subject is 'Nothing'." },

            // --- RULE 22: Adjective as Noun (The + Adj = Plural) ---
            { q: "The rich ___ not always happy.", options: ["is", "are"], answer: 1, rule: "Rule 22", expl: "'The rich' = Rich people (Plural)." },
            { q: "The poor ___ harder lives.", options: ["live", "lives"], answer: 0, rule: "Rule 22", expl: "Plural." },
            { q: "The injured ___ taken to the hospital.", options: ["was", "were"], answer: 1, rule: "Rule 22", expl: "Plural." },
            { q: "The brave ___ the world.", options: ["rule", "rules"], answer: 0, rule: "Rule 22", expl: "Plural." },
            { q: "The young ___ the future of the nation.", options: ["is", "are"], answer: 1, rule: "Rule 22", expl: "Plural." },
            { q: "The old ___ respect from the youth.", options: ["deserve", "deserves"], answer: 0, rule: "Rule 22", expl: "Plural." },
            { q: "The unemployed ___ demanding jobs.", options: ["is", "are"], answer: 1, rule: "Rule 22", expl: "Plural." },
            { q: "The blind ___ a sharp sense of hearing.", options: ["has", "have"], answer: 1, rule: "Rule 22", expl: "Plural." },
            { q: "The wise ___ silence to speech.", options: ["prefer", "prefers"], answer: 0, rule: "Rule 22", expl: "Plural." },
            { q: "The dead ___ at peace.", options: ["is", "are"], answer: 1, rule: "Rule 22", expl: "Plural." },
            { q: "The meek ___ inherit the earth.", options: ["shall", "will"], answer: 0, rule: "Rule 22", expl: "Biblical quote, usually 'shall', but grammatically plural concept." },
            { q: "The homeless ___ shelter.", options: ["need", "needs"], answer: 0, rule: "Rule 22", expl: "Plural." },

            // --- FINAL MIXED BAG (Complex / Bank PO Level) ---
            { q: "The introduction of tea, coffee, and other beverages ___ not without resistance.", options: ["was", "were"], answer: 0, rule: "Rule 1", expl: "Subject: Introduction." },
            { q: "Not only the students but also the instructor ___ to be blamed.", options: ["is", "are"], answer: 0, rule: "Rule 3", expl: "Nearest subject: Instructor." },
            { q: "The number of people applying for the loan ___ increased drastically.", options: ["has", "have"], answer: 0, rule: "Rule 15", expl: "The number (Singular)." },
            { q: "More than one proposal ___ been rejected by the board.", options: ["has", "have"], answer: 0, rule: "Rule 18", expl: "More than one (Singular)." },
            { q: "It is one of the best strategies that ___ ever been devised.", options: ["has", "have"], answer: 1, rule: "Rule 9", expl: "Antecedent: Strategies (Plural)." },
            { q: "Five hundred miles ___ a long drive.", options: ["is", "are"], answer: 0, rule: "Rule 16", expl: "Distance (Singular)." },
            { q: "The Prime Minister, along with his cabinet colleagues, ___ arrived.", options: ["has", "have"], answer: 0, rule: "Rule 2", expl: "First subject dominates." },
            { q: "If I ___ the manager, I would not allow this.", options: ["was", "were"], answer: 1, rule: "Rule 20", expl: "Hypothetical." },
            { q: "Bread and butter ___ essential for survival.", options: ["is", "are"], answer: 0, rule: "Rule 4", expl: "Single idea." },
            { q: "The jury ___ divided in their opinions.", options: ["was", "were"], answer: 1, rule: "Rule 13 (Exception)", expl: "Collective noun acting individually = Plural." },
            { q: "The committee ___ issued its report.", options: ["has", "have"], answer: 0, rule: "Rule 13 (Exception)", expl: "Collective noun acting as one unit = Singular." },
            { q: "Three-fourths of the earth's surface ___ covered by water.", options: ["is", "are"], answer: 0, rule: "Rule 17", expl: "Surface is singular." },
            { q: "One of the boys who ___ always late was punished.", options: ["is", "are"], answer: 1, rule: "Rule 9", expl: "Relative clause antecedent 'boys' is plural." },
            { q: "Neither the captain nor the players ___ disheartened.", options: ["was", "were"], answer: 1, rule: "Rule 3", expl: "Nearest subject 'players'." },
            { q: "The quality of these mangoes ___ good.", options: ["is", "are"], answer: 0, rule: "Rule 1", expl: "Subject 'Quality'." },
            { q: "Cattle ___ not allowed inside.", options: ["is", "are"], answer: 1, rule: "Rule 13", expl: "Cattle is plural." },
            { q: "Mathematics ___ practice.", options: ["require", "requires"], answer: 1, rule: "Rule 12", expl: "Subject is singular." },
            { q: "Ten thousand rupees ___ distributed among the poor.", options: ["was", "were"], answer: 1, rule: "Rule 16 (Exception)", expl: "When discussing distribution of individual notes/coins, it becomes plural. If it was 'is a large sum', it's singular." },
            { q: "A pair of trousers ___ hanging in the closet.", options: ["is", "are"], answer: 0, rule: "Rule 14", expl: "A pair = Singular." },
            { q: "He is one of those who ___ never satisfied.", options: ["is", "are"], answer: 1, rule: "Rule 9", expl: "Antecedent 'those' is plural." },
        ];

        // --- LOGIC ---

        // Shuffle the questions initially
        questionBank.sort(() => Math.random() - 0.5);

        let currentQuestionIndex = 0;
        let score = 0;
        const totalQuestions = questionBank.length;

        // DOM Elements
        const qContainer = document.getElementById('quiz-container');
        const qCountSpan = document.getElementById('q-current');
        const qTotalSpan = document.getElementById('q-total');
        const scoreSpan = document.getElementById('score');
        const nextBtn = document.getElementById('next-btn');
        const prevBtn = document.getElementById('prev-btn');

        qTotalSpan.textContent = totalQuestions;

        function renderQuestion(index) {
            const q = questionBank[index];
            qContainer.innerHTML = `
            <div class="question-card">
                <div class="rule-tag">${q.rule}</div>
                <div class="question-text">Q${index + 1}. ${q.q}</div>
                <div class="options-grid">
                    <div class="option-btn" onclick="checkAnswer(this, 0)">${q.options[0]}</div>
                    <div class="option-btn" onclick="checkAnswer(this, 1)">${q.options[1]}</div>
                </div>
                <div class="explanation" id="expl-${index}">
                    <strong>${q.answer === 0 ? q.options[0] : q.options[1]}</strong> is correct.<br>
                    <small>${q.expl}</small>
                </div>
            </div>
        `;

            // Check if this question was already answered to restore state
            if (q.userAnswer !== undefined) {
                const opts = document.querySelectorAll('.option-btn');
                checkAnswer(opts[q.userAnswer], q.userAnswer, false); // false = don't update score again
            }

            updateNavButtons();
        }

        function checkAnswer(btnElement, selectedIndex, updateScore = true) {
            const q = questionBank[currentQuestionIndex];
            const allOpts = document.querySelectorAll('.option-btn');
            const explDiv = document.getElementById(`expl-${currentQuestionIndex}`);

            // Disable further clicks
            allOpts.forEach(btn => {
                btn.onclick = null;
                btn.style.cursor = 'default';
            });

            // Visually mark selected
            if (selectedIndex === q.answer) {
                btnElement.classList.add('correct');
                if (updateScore) {
                    score++;
                    scoreSpan.textContent = score;
                    q.userCorrect = true;
                }
            } else {
                btnElement.classList.add('incorrect');
                allOpts[q.answer].classList.add('correct'); // Show correct one
                if (updateScore) q.userCorrect = false;
            }

            // Save state
            if (updateScore) q.userAnswer = selectedIndex;

            // Show explanation
            explDiv.style.display = 'block';
        }

        function nextQuestion() {
            if (currentQuestionIndex < totalQuestions - 1) {
                currentQuestionIndex++;
                qCountSpan.textContent = currentQuestionIndex + 1;
                renderQuestion(currentQuestionIndex);
            }
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                qCountSpan.textContent = currentQuestionIndex + 1;
                renderQuestion(currentQuestionIndex);
            }
        }

        function updateNavButtons() {
            prevBtn.disabled = currentQuestionIndex === 0;
            nextBtn.innerText = currentQuestionIndex === totalQuestions - 1 ? "Finish" : "Next";
            if (currentQuestionIndex === totalQuestions - 1) {
                nextBtn.onclick = () => alert(`Quiz Finished! Your Score: ${score} / ${totalQuestions}`);
            } else {
                nextBtn.onclick = nextQuestion;
            }
        }

        // Init
        renderQuestion(0);

    </script>

</body>

</html>